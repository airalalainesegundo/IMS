{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h3>Chat with {{ student.name }}</h3>

  <div class="chat-box border p-3 mt-3 mb-3" style="height:400px; overflow-y:auto;">
    {% for msg in messages %}
      {% if msg.sender_id == current_user.id %}
        <div class="text-end mb-2">
          <span class="badge bg-primary">{{ msg.content }}</span><br>
          <small class="text-muted">{{ msg.timestamp.strftime("%b %d, %I:%M %p") }}</small>
        </div>
      {% else %}
        <div class="text-start mb-2">
          <span class="badge bg-secondary">{{ msg.content }}</span><br>
          <small class="text-muted">{{ msg.timestamp.strftime("%b %d, %I:%M %p") }}</small>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <form method="POST" action="{{ url_for('send_hte_message', student_id=student.id) }}">
    <div class="input-group">
      <input type="text" name="message" class="form-control" placeholder="Type a message..." required>
      <button class="btn btn-primary">Send</button>
    </div>
  </form>
</div>
{% endblock %}
